<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>External integrations · Backstage Software Catalog and Developer Platform</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Documentation on External integrations to integrate systems with Backstage"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="External integrations · Backstage Software Catalog and Developer Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://backstage.io/"/><meta property="og:description" content="Documentation on External integrations to integrate systems with Backstage"/><meta property="og:image" content="https://backstage.io/img/sharing-opengraph.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://backstage.io/img/twitter-summary.png"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai.min.css"/><link rel="alternate" type="application/atom+xml" href="https://backstage.io/blog/atom.xml" title="Backstage Software Catalog and Developer Platform Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://backstage.io/blog/feed.xml" title="Backstage Software Catalog and Developer Platform Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-163836834-5', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:500,700&amp;display=swap"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://unpkg.com/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script type="text/javascript" src="/js/medium-zoom.js"></script><script type="text/javascript" src="/js/dismissable-banner.js"></script><script type="text/javascript" src="/js/scroll-nav-to-view-in-docs.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">Backstage Software Catalog and Developer Platform</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://github.com/backstage/backstage" target="_self">GitHub</a></li><li class="siteNavGroupActive"><a href="/docs/overview/what-is-backstage" target="_self">Docs</a></li><li class=""><a href="/plugins" target="_self">Plugins</a></li><li class=""><a href="/blog" target="_self">Blog</a></li><li class=""><a href="/demos" target="_self">Demos</a></li><li class=""><a href="https://mailchi.mp/spotify/backstage-community" target="_self">Newsletter</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Software Catalog</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Overview<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/overview/what-is-backstage">What is Backstage?</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/architecture-overview">Architecture overview</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/roadmap">Roadmap</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/vision">Vision</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/background">The Spotify Story</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/adopting">Strategies for adopting</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/stability-index">Stability Index</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/support">Support and community</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/glossary">Backstage Glossary</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/logos">Logo assets</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/getting-started/">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/configuration">Getting Started, configuring Backstage</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/create-an-app">Create an App</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/running-backstage-locally">Running Backstage Locally</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">App configuration</h4><ul><li class="navListItem"><a class="navItem" href="/docs/getting-started/configure-app-with-plugins">Configuring App with plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/app-custom-theme">Customize the look-and-feel of your App</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/homepage">Backstage homepage - Setup and Customization</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/getting-started/keeping-backstage-updated">Keeping Backstage Updated</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/concepts">Key Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/contributors">Contributors</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/project-structure">Backstage Project Structure</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Local Development<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">CLI</h4><ul><li class="navListItem"><a class="navItem" href="/docs/local-dev/cli-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/local-dev/cli-build-system">Build System</a></li><li class="navListItem"><a class="navItem" href="/docs/local-dev/cli-commands">Commands</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/local-dev/linking-local-packages">Linking in Local Packages</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Core Features<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Software Catalog</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/software-catalog-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/life-of-an-entity">The Life of an Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/configuration">Catalog Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/system-model">System Model</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/descriptor-format">YAML File Format</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/references">Entity References</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/well-known-annotations">Well-known Annotations</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/well-known-relations">Well-known Relations</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/well-known-statuses">Well-known Statuses</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/extending-the-model">Extending the model</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/features/software-catalog/external-integrations">External integrations</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/catalog-customization">Catalog Customization</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/software-catalog-api">API</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Kubernetes</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/kubernetes/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/kubernetes/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/features/kubernetes/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/features/kubernetes/troubleshooting">Troubleshooting</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Software Templates</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/software-templates-index">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/adding-templates">Adding your own Templates</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/writing-templates">Writing Templates</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/builtin-actions">Builtin actions</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/writing-custom-actions">Writing Custom Actions</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/writing-custom-field-extensions">Writing Custom Field Extensions</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/migrating-from-v1beta2-to-v1beta3">Migrating to v1beta3 templates</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Backstage Search</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/search/search-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/getting-started">Getting Started with Search</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/concepts">Search Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/architecture">Search Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/search-engines">Search Engines</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/how-to-guides">&quot;HOW TO&quot; guides</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">TechDocs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/techdocs-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/concepts">Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/architecture">TechDocs Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/creating-and-publishing">Creating and Publishing Documentation</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/configuration">TechDocs Configuration Options</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/using-cloud-storage">Using Cloud Storage for TechDocs generated files</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/configuring-ci-cd">Configuring CI/CD to generate and publish TechDocs sites</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/cli">TechDocs CLI</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/how-to-guides">&quot;HOW TO&quot; guides</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/troubleshooting">Troubleshooting</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/faqs">FAQ</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Integrations<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/integrations/">Overview</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">AWS S3</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/aws-s3/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/aws-s3/discovery">Discovery</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Azure</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/azure/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/azure/discovery">Discovery</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/azure/org">Org Data</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Bitbucket</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/bitbucket/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/bitbucket/discovery">Discovery</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Datadog</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/datadog-rum/installation">Installation</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">GitHub</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/github/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/github/discovery">Discovery</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/github/org">Org Data</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">GitLab</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/gitlab/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/gitlab/discovery">Discovery</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Google GCS</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/google-cloud-storage/locations">Locations</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">LDAP</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/ldap/org">Org Data</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Plugins<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/plugins/">Intro to plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/existing-plugins">Existing plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/create-a-plugin">Create a Backstage Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/plugin-development">Plugin Development</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/structure-of-a-plugin">Structure of a Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/integrating-plugin-into-software-catalog">Integrate into the Software Catalog</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/composability">Composability System</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/analytics">Plugin Analytics</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Backends and APIs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/plugins/proxying">Proxying</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/backend-plugin">Backend plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/call-existing-api">Call Existing API</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/github-apps">GitHub Apps for Backend Authentication</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/url-reader">URL Reader</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Testing</h4><ul><li class="navListItem"><a class="navItem" href="/docs/plugins/testing">Testing with Jest</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Publishing</h4><ul><li class="navListItem"><a class="navItem" href="/docs/plugins/publish-private">Publish private</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/add-to-marketplace">Add to Marketplace</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/observability">Observability</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Configuration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/conf/">Static Configuration in Backstage</a></li><li class="navListItem"><a class="navItem" href="/docs/conf/reading">Reading Backstage Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/conf/writing">Writing Backstage Configuration Files</a></li><li class="navListItem"><a class="navItem" href="/docs/conf/defining">Defining Configuration for your Plugin</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Auth and identity<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/auth/">Adding Authentication</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Included providers</h4><ul><li class="navListItem"><a class="navItem" href="/docs/auth/auth0/provider">Auth0</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/atlassian/provider">Atlassian</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/bitbucket/provider">Bitbucket</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/microsoft/provider">Azure</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/github/provider">GitHub</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/gitlab/provider">GitLab</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/google/provider">Google</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/okta/provider">Okta</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/onelogin/provider">OneLogin</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/oauth2-proxy/provider">OAuth 2 Custom Proxy</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/auth/add-auth-provider">Adding authentication providers</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/using-auth">Using authentication and identity</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/identity-resolver">Identity resolver</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/auth-backend">Auth backend</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/oauth">OAuth and OpenID Connect</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/auth-backend-classes">Auth backend classes</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/glossary">Glossary</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Deployment<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/deployment/">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/deployment/docker">Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/deployment/k8s">Kubernetes</a></li><li class="navListItem"><a class="navItem" href="/docs/deployment/helm">Helm</a></li><li class="navListItem"><a class="navItem" href="/docs/deployment/heroku">Heroku</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Designing for Backstage<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/dls/design">Design</a></li><li class="navListItem"><a class="navItem" href="/docs/dls/contributing-to-storybook">Contributing to Storybook</a></li><li class="navListItem"><a class="navItem" href="/docs/dls/figma">Figma</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">API Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/api/utility-apis">Utility APIs</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API Reference</h4><ul><li class="navListItem"><a class="navItem" href="/docs/reference/">Package Index</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/api/deprecations">Deprecations</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tutorials<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/tutorials/journey">Future developer journey</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/quickstart-app-plugin">Adding Custom Plugin to Existing Monorepo App</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/migrating-away-from-core">Migrating away from @backstage/core</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/configuring-plugin-databases">Configuring Plugin Databases</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/switching-sqlite-postgres">Switching Backstage from SQLite to PostgreSQL</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/using-backstage-proxy-within-plugin">Using the Backstage Proxy from Within a Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/backend-to-backend-auth">Backend-to-Backend Authentication</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Architecture Decision Records (ADRs)<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr001">&#x27;ADR001: Architecture Decision Record (ADR) log&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr002">&#x27;ADR002: Default Software Catalog File Format&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr003">&#x27;ADR003: Avoid Default Exports and Prefer Named Exports&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr004">&#x27;ADR004: Module Export Structure&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr005">&#x27;ADR005: Catalog Core Entities&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr006">&#x27;ADR006: Avoid React.FC and React.SFC&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr007">&#x27;ADR007: Use MSW to mock http requests&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr008">&#x27;ADR008: Default Catalog File Name&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr009">&#x27;ADR009: Entity References&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr010">&#x27;ADR010: Use the Luxon Date Library&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr011">&#x27;ADR011: Plugin Package Structure&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr012">&#x27;ADR012: Use Luxon.toLocaleString and date/time presets&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr013">&#x27;ADR013: Proper use of HTTP fetching libraries&#x27;</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">FAQ<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/FAQ">FAQ</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/backstage/backstage/edit/master/docs/features/software-catalog/external-integrations.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">External integrations</h1></header><article><div><span><p>Backstage natively supports importing catalog data through the use of
<a href="/docs/features/software-catalog/descriptor-format">entity descriptor YAML files</a>. However, companies that
already have an existing system for keeping track of software and its owners can
leverage those systems by integrating them with Backstage. This article shows
the two common ways of doing that integration: by adding a custom catalog
<em>entity provider</em>, or by adding a <em>processor</em>.</p>
<h2><a class="anchor" aria-hidden="true" id="background"></a><a href="#background" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Background</h2>
<p>The catalog has a frontend plugin part, that communicates via a service API to
the backend plugin part. The backend continuously ingests data from the sources
you specify, to store them in its database. The details of how this works is
detailed in <a href="/docs/features/software-catalog/life-of-an-entity">The Life of an Entity</a>. Reading that article
first is recommended.</p>
<p>There are two main options for how to ingest data into the catalog: making a
<a href="#custom-entity-providers">custom entity provider</a>, or making a
<a href="#custom-processors">custom processor</a>. They both have strengths and drawbacks,
but the former would usually be preferred. Both options are presented in a
dedicated subsection below.</p>
<h2><a class="anchor" aria-hidden="true" id="custom-entity-providers"></a><a href="#custom-entity-providers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom Entity Providers</h2>
<p>Entity providers sit at the very edge of the catalog. They are the original
sources of entities that form roots of the processing tree. The dynamic location
store API, and the static locations you can specify in your app-config, are two
examples of builtin providers in the catalog.</p>
<p>Some defining traits of entity providers:</p>
<ul>
<li>You instantiate them individually using code in your backend, and pass them to
the catalog builder. Often there's one provider instance per remote system.</li>
<li>You may be responsible for actively running them. For example, some providers
need to be triggered periodically by a method call to know when they are meant
to do their job; in that case you'll have to make that happen.</li>
<li>The timing of their work is entirely detached from the processing loops. One
provider may run every 30 seconds, another one on every incoming webhook call
of a certain type, etc.</li>
<li>They can perform detailed updates on the set of entities that they are
responsible for. They can make full updates of the entire set, or issue
individual additions and removals.</li>
<li>Their output is a set of unprocessed entities. Those are then subject to the
processing loops before becoming final, stitched entities.</li>
<li>When they remove an entity, the entire subtree of processor-generated entities
under that root is eagerly removed as well.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="creating-an-entity-provider"></a><a href="#creating-an-entity-provider" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating an Entity Provider</h3>
<p>The recommended way of instantiating the catalog backend classes is to use the
<code>CatalogBuilder</code>, as illustrated in the
<a href="https://github.com/backstage/backstage/blob/master/packages/backend/src/plugins/catalog.ts">example backend here</a>.
We will create a new
<a href="https://github.com/backstage/backstage/blob/master/plugins/catalog-backend/src/providers/types.ts"><code>EntityProvider</code></a>
subclass that can be added to this catalog builder.</p>
<p>Let's make a simple provider that can refresh a set of entities based on a
remote store. The provider part of the interface is actually tiny - you only
have to supply a (unique) name, and accept a connection from the environment
through which you can issue writes. The rest is up to the individual provider
implementation.</p>
<p>It is up to you where you put the code for this new processor class. For quick
experimentation you could place it in your backend package, but we recommend
putting all extensions like this in a backend plugin package of their own in the
<code>plugins</code> folder of your Backstage repo.</p>
<p>The class will have this basic structure:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { UrlReader } <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/backend-common'</span>;
<span class="hljs-keyword">import</span> { Entity } <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/catalog-model'</span>;
<span class="hljs-keyword">import</span> {
  EntityProvider,
  EntityProviderConnection,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/plugin-catalog-backend'</span>;

<span class="hljs-comment">/**
 * Provides entities from fictional frobs service.
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> FrobsProvider <span class="hljs-keyword">implements</span> EntityProvider {
  <span class="hljs-keyword">private</span> readonly env: <span class="hljs-built_in">string</span>;
  <span class="hljs-keyword">private</span> readonly reader: UrlReader;
  <span class="hljs-keyword">private</span> connection?: EntityProviderConnection;

  <span class="hljs-comment">/** [1] **/</span>
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">env: <span class="hljs-built_in">string</span>, reader: UrlReader</span>) {
    <span class="hljs-keyword">this</span>.env = env;
    <span class="hljs-keyword">this</span>.reader = reader;
  }

  <span class="hljs-comment">/** [2] **/</span>
  getProviderName(): <span class="hljs-built_in">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`frobs-<span class="hljs-subst">${<span class="hljs-keyword">this</span>.env}</span>`</span>;
  }

  <span class="hljs-comment">/** [3] **/</span>
  <span class="hljs-keyword">async</span> connect(connection: EntityProviderConnection): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">this</span>.connection = connection;
  }

  <span class="hljs-comment">/** [4] **/</span>
  <span class="hljs-keyword">async</span> run(): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.connection) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Not initialized'</span>);
    }

    <span class="hljs-keyword">const</span> raw = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.reader.read(
      <span class="hljs-string">`https://frobs-<span class="hljs-subst">${<span class="hljs-keyword">this</span>.env}</span>.example.com/data`</span>,
    );
    <span class="hljs-keyword">const</span> data = <span class="hljs-built_in">JSON</span>.parse(raw.toString());

    <span class="hljs-comment">/** [5] **/</span>
    <span class="hljs-keyword">const</span> entities: Entity[] = frobsToEntities(data);

    <span class="hljs-comment">/** [6] **/</span>
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.connection.applyMutation({
      <span class="hljs-keyword">type</span>: <span class="hljs-string">'full'</span>,
      entities: entities.map(<span class="hljs-function"><span class="hljs-params">entity</span> =&gt;</span> ({
        entity,
        locationKey: <span class="hljs-string">`frobs-provider:<span class="hljs-subst">${<span class="hljs-keyword">this</span>.env}</span>`</span>,
      })),
    });
  }
}
</code></pre>
<p>This class demonstrates several important concepts, some of which are optional.
Check out the numbered markings - let's go through them one by one.</p>
<ol>
<li>The class takes an <code>env</code> parameter. This is only illustrative for the sake of
the example. We'll use this field to exhibit the type of provider where end
users may want or need to make multiple instances of the same provider, and
what the implications would be in that case.</li>
<li>The catalog requires that all registered providers return a name that is
<em>unique</em> among those providers, and which is <em>stable</em> over time. The reason
for these requirements is, the emitted entities for each provider instance
all hang around in a closed bucket of their own. This bucket needs to be tied
to their provider over time, and across backend restarts. We'll see below how
the processor emits some entities and what that means for its own bucket.</li>
<li>Once the catalog engine starts up, it immediately issues the <code>connect</code> call
to all known providers. This forms the bond between the code and the
database. This is also an opportunity for the provider to do one-time updates
on the connection at startup if it wants to.</li>
<li>At this point the provider contract is already complete. But the class needs
to do some actual work too! In this particular example, we chose to make a
<code>run</code> method that has to be called each time that you want to issue a sync
with the <code>frobs</code> service. Let's repeat that - this is only an example
implementation; some providers may be written in entirely different ways,
such as for example subscribing to pubsub events and only reacting to those,
or any number of other solutions. The only point is - external stimuli happen
somehow, which somehow get translated to calls on the <code>connection</code> to persist
the outcome of that. This example issues a <code>fetch</code> to the right service and
issues a full refresh of its entity bucket based on that.</li>
<li>The method translates the foreign data model to the native <code>Entity</code> form, as
expected by the catalog.</li>
<li>Finally, we issue a &quot;mutation&quot; to the catalog. This persists the entities in
our own bucket, along with an optional <code>locationKey</code> that's used for conflict
checks. But this is a bigger topic - mutations warrant their own explanatory
section below.</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="provider-mutations"></a><a href="#provider-mutations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Provider Mutations</h3>
<p>Let's circle back to the bucket analogy.</p>
<p>Each provider <em>instance</em> - not each class but each instance registered with the
catalog - has access to its own bucket of entities, and the bucket is identified
by the stable name of the provider instance. Every time the provider issues
&quot;mutations&quot;, it changes the contents of that bucket. Nothing else outside of the
bucket is accessible.</p>
<p>There are two different types of mutation.</p>
<p>The first is <code>'full'</code>, which means to figuratively throw away the contents of
the bucket and replacing it with all of the new contents specified. Under the
hood, this is actually implemented through a highly efficient delta mechanism
for performance reasons, since it is common that the difference from one run to
the other is actually very small. This strategy is convenient for providers that
have easy access to batch-fetches of the entire subject material from a remote
source, and doesn't have access to, or does not want to compute, deltas.</p>
<p>The other mutation type is <code>'delta'</code>, which lets the provider explicitly upsert
or delete entities in its bucket. This mutation is convenient e.g. for event
based providers, and can also be more performant since no deltas need to be
computed, and previous bucket contents outside of the targeted set do not have
to be taken into account.</p>
<p>In all cases, the mutation entities are treated as <em>unprocessed</em> entities. When
they land in the database, the registered catalog processors go to work on them
to transform them into final, processed and stitched, entities ready for
consumption.</p>
<p>Every entity emitted by a processor can have a <code>locationKey</code>, as shown above.
This is a critical conflict resolution key, in the form of an opaque string that
should be unique for each location that an entity could be located at, and
undefined if the entity does not have a fixed location.</p>
<p>In practice it should be set to the serialized location reference if the entity
is stored in Git, for example
<code>https://github.com/backstage/backstage/blob/master/catalog-info.yaml</code>, or a
similar string that distinctly pins down its origins. In our example we set it
to a string that was distinct for the provider class, plus its instance
identifying properties which in this case was the <code>env</code>.</p>
<p>A conflict between two entity definitions happen when they have the same entity
reference, i.e. kind, namespace, and name. In the event of a conflict, such as
if two &quot;competing&quot; providers try to emit entities that have the same reference
triplet, the location key will be used according to the following rules to
resolve the conflict:</p>
<ul>
<li>If the entity is already present in the database but does not have a location
key set, the new entity wins and will override the existing one.</li>
<li>If the entity is already present in the database the new entity will only win
if the location keys of the existing and new entity are the same.</li>
<li>If the entity is not already present, insert the entity into the database
along with the provided location key.</li>
</ul>
<p>This may seem complex, but is a vital mechanism for ensuring that users aren't
permitted to do &quot;rogue&quot; takeovers of already registered entities that belong to
others.</p>
<h3><a class="anchor" aria-hidden="true" id="installing-the-provider"></a><a href="#installing-the-provider" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Installing the Provider</h3>
<p>You should now be able to add this class to your backend in
<code>packages/backend/src/plugins/catalog.ts</code>:</p>
<pre><code class="hljs css language-diff"><span class="hljs-addition">+import { Duration } from 'luxon';</span>
<span class="hljs-addition">+import { FrobsProvider } from '../path/to/class';</span>

 export default async function createPlugin(
   env: PluginEnvironment,
 ): Promise&lt;Router&gt; {
   const builder = CatalogBuilder.create(env);

<span class="hljs-addition">+  const frobs = new FrobsProvider('production', env.reader);</span>
<span class="hljs-addition">+  builder.addEntityProvider(frobs);</span>

   const { processingEngine, router } = await builder.build();
   await processingEngine.start();

<span class="hljs-addition">+  await env.scheduler.scheduleTask({</span>
<span class="hljs-addition">+    id: 'run_frobs_refresh',</span>
<span class="hljs-addition">+    fn: async () =&gt; { await frobs.run(); },</span>
<span class="hljs-addition">+    frequency: Duration.fromObject({ minutes: 30 }),</span>
<span class="hljs-addition">+    timeout: Duration.fromObject({ minutes: 10 }),</span>
<span class="hljs-addition">+  });</span>
</code></pre>
<p>Note that we used the builtin scheduler facility to regularly call the <code>run</code>
method of the provider, in this example. It is a suitable driver for this
particular type of recurring task. We placed the scheduling after the actual
construction and startup phase of the rest of the catalog, because at that point
the <code>connect</code> call has been made to the provider.</p>
<p>Start up the backend - it should now start reading from the previously
registered location and you'll see your entities start to appear in Backstage.</p>
<h2><a class="anchor" aria-hidden="true" id="custom-processors"></a><a href="#custom-processors" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Custom Processors</h2>
<p>The other possible way of ingesting data into the catalog is through the use of
location reading catalog processors.</p>
<p>Processors sit in the middle of the processing loops of the catalog. They are
responsible for updating and finalizing unprocessed entities on their way to
becoming final, stitched entities. They can also, crucially, emit other entities
while doing so. Those then form branches of the entity tree.</p>
<p>Some defining traits of processors:</p>
<ul>
<li>You instantiate them using code in your backend, and pass them to the catalog
builder. There's usually only one instance of each type, which then gets
called many times over in parallel for all entities in the catalog.</li>
<li>Their invocation is driven by the fixed processing loop. All processors are
unconditionally repeatedly called for all entities. You cannot control this
behavior, besides adjusting the frequency of the loop, which then applies
equally to all processors.</li>
<li>They cannot control in detail the entities that they emit, the only effective
operation is upsert on their children. If they stop emitting a certain child,
that child becomes marked as an orphan; no deletions are possible.</li>
<li>Their input is an unprocessed entity, and their output is modifications to
that same entity plus possibly some auxiliary data including unprocessed child
entities.</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="processors-and-the-ingestion-loop"></a><a href="#processors-and-the-ingestion-loop" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Processors and the Ingestion Loop</h3>
<p>The catalog holds a number of registered locations, that were added either by
site admins or by individual Backstage users. Their purpose is to reference some
sort of data that the catalog shall keep itself up to date with. Each location
has a <code>type</code>, and a <code>target</code> that are both strings.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-comment"># Example location</span>
<span class="hljs-attr">type:</span> <span class="hljs-string">url</span>
<span class="hljs-attr">target:</span> <span class="hljs-string">https://github.com/backstage/backstage/blob/master/catalog-info.yaml</span>
</code></pre>
<p>The builtin catalog backend has an ingestion loop that periodically goes through
all of these registered locations, and pushes them and their resulting output
through the list of <em>processors</em>.</p>
<p>Processors are classes that the site admin has registered with the catalog at
startup. They are at the heart of all catalog logic, and have the ability to
read the contents of locations, modify in-flight entities that were read out of
a location, perform validation, and more. The catalog comes with a set of
builtin processors, that have the ability to read from a list of well known
location types, to perform the basic processing needs, etc, but more can be
added by the organization that adopts Backstage.</p>
<p>We will now show the process of creating a new processor and location type,
which enables the ingestion of catalog data from an existing external API.</p>
<h3><a class="anchor" aria-hidden="true" id="deciding-on-the-new-locations"></a><a href="#deciding-on-the-new-locations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deciding on the New Locations</h3>
<p>The first step is to decide how we want to point at the system that holds our
data. Let's assume that it is internally named System-X and can be reached
through HTTP REST calls to its API.</p>
<p>Let's decide that our locations shall take the following form:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">type:</span> <span class="hljs-string">system-x</span>
<span class="hljs-attr">target:</span> <span class="hljs-string">http://systemx.services.example.net/api/v2</span>
</code></pre>
<p>It got its own made-up <code>type</code>, and the <code>target</code> conveniently points to the
actual API endpoint to talk to.</p>
<p>So now we have to make the catalog aware of such a location so that it can start
feeding it into the ingestion loop. For this kind of an integration, you'd
typically want to add it to the list of statically always-available locations in
the config.</p>
<pre><code class="hljs css language-yaml"><span class="hljs-comment"># In app-config.yaml</span>
<span class="hljs-attr">catalog:</span>
  <span class="hljs-attr">locations:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">system-x</span>
      <span class="hljs-attr">target:</span> <span class="hljs-string">http://systemx.services.example.net/api/v2</span>
</code></pre>
<p>If you start up the backend now, it will start to periodically say that it could
not find a processor that supports that location. So let's make a processor that
does so!</p>
<h3><a class="anchor" aria-hidden="true" id="creating-a-catalog-data-reader-processor"></a><a href="#creating-a-catalog-data-reader-processor" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating a Catalog Data Reader Processor</h3>
<p>The recommended way of instantiating the catalog backend classes is to use the
<code>CatalogBuilder</code>, as illustrated in the
<a href="https://github.com/backstage/backstage/blob/master/packages/backend/src/plugins/catalog.ts">example backend here</a>.
We will create a new
<a href="https://github.com/backstage/backstage/blob/master/plugins/catalog-backend/src/ingestion/processors/types.ts"><code>CatalogProcessor</code></a>
subclass that can be added to this catalog builder.</p>
<p>It is up to you where you put the code for this new processor class. For quick
experimentation you could place it in your backend package, but we recommend
putting all extensions like this in a backend plugin package of their own in the
<code>plugins</code> folder of your Backstage repo.</p>
<p>The class will have this basic structure:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { UrlReader } <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/backend-common'</span>;
<span class="hljs-keyword">import</span> { LocationSpec } <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/catalog-model'</span>;
<span class="hljs-keyword">import</span> {
  results,
  CatalogProcessor,
  CatalogProcessorEmit,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/plugin-catalog-backend'</span>;

<span class="hljs-comment">// A processor that reads from the fictional System-X</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> SystemXReaderProcessor <span class="hljs-keyword">implements</span> CatalogProcessor {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> readonly reader: UrlReader</span>) {}

  <span class="hljs-keyword">async</span> readLocation(
    location: LocationSpec,
    _optional: <span class="hljs-built_in">boolean</span>,
    emit: CatalogProcessorEmit,
  ): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
    <span class="hljs-comment">// Pick a custom location type string. A location will be</span>
    <span class="hljs-comment">// registered later with this type.</span>
    <span class="hljs-keyword">if</span> (location.type !== <span class="hljs-string">'system-x'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// Use the builtin reader facility to grab data from the</span>
      <span class="hljs-comment">// API. If you prefer, you can just use plain fetch here</span>
      <span class="hljs-comment">// (from the node-fetch package), or any other method of</span>
      <span class="hljs-comment">// your choosing.</span>
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.reader.read(location.target);
      <span class="hljs-keyword">const</span> json = <span class="hljs-built_in">JSON</span>.parse(data.toString());
      <span class="hljs-comment">// Repeatedly call emit(results.entity(location, &lt;entity&gt;))</span>
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">const</span> message = <span class="hljs-string">`Unable to read <span class="hljs-subst">${location.<span class="hljs-keyword">type</span>}</span>, <span class="hljs-subst">${error}</span>`</span>;
      emit(results.generalError(location, message));
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}
</code></pre>
<p>The key points to note are:</p>
<ul>
<li>Make a class that implements <code>CatalogProcessor</code></li>
<li>Only act on location types that you care about, and leave the rest alone by
returning <code>false</code></li>
<li>Read the data from the external system in any way you see fit. Use the
location <code>target</code> field if you designed it as mentioned above</li>
<li>Call <code>emit</code> any number of times with the results of that process</li>
<li>Finally return <code>true</code></li>
</ul>
<p>You should now be able to add this class to your backend in
<code>packages/backend/src/plugins/catalog.ts</code>:</p>
<pre><code class="hljs css language-diff"><span class="hljs-addition">+import { SystemXReaderProcessor } from '../path/to/class';</span>

 export default async function createPlugin(
   env: PluginEnvironment,
 ): Promise&lt;Router&gt; {
   const builder = CatalogBuilder.create(env);
<span class="hljs-addition">+  builder.addProcessor(new SystemXReaderProcessor(env.reader));</span>
</code></pre>
<p>Start up the backend - it should now start reading from the previously
registered location and you'll see your entities start to appear in Backstage.</p>
<h3><a class="anchor" aria-hidden="true" id="caching-processing-results"></a><a href="#caching-processing-results" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Caching processing results</h3>
<p>The catalog periodically refreshes entities in the catalog, and in doing so it
calls out to external systems to fetch changes. This can be taxing for upstream
services and large deployments may get rate limited if too many requests are
sent. Luckily many external systems provide ETag support to check for changes
which usually doesn't count towards the quota and saves resources both
internally and externally.</p>
<p>The catalog has built in support for leveraging ETags when refreshing external
locations in GitHub. This example aims to demonstrate how to add the same
behavior for <code>system-x</code> that we implemented earlier.</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { UrlReader } <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/backend-common'</span>;
<span class="hljs-keyword">import</span> { Entity, LocationSpec } <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/catalog-model'</span>;
<span class="hljs-keyword">import</span> {
  results,
  CatalogProcessor,
  CatalogProcessorEmit,
  CatalogProcessorCache,
  CatalogProcessorParser,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/plugin-catalog-backend'</span>;

<span class="hljs-comment">// It's recommended to always bump the CACHE_KEY version if you make</span>
<span class="hljs-comment">// changes to the processor implementation or CacheItem.</span>
<span class="hljs-keyword">const</span> CACHE_KEY = <span class="hljs-string">'v1'</span>;

<span class="hljs-comment">// Our cache item contains the ETag used in the upstream request</span>
<span class="hljs-comment">// as well as the processing result used when the Etag matches.</span>
<span class="hljs-comment">// Bump the CACHE_KEY version if you make any changes to this type.</span>
<span class="hljs-keyword">type</span> CacheItem = {
  etag: <span class="hljs-built_in">string</span>;
  entity: Entity;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> SystemXReaderProcessor <span class="hljs-keyword">implements</span> CatalogProcessor {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> readonly reader: UrlReader</span>) {}

  getProcessorName() {
    <span class="hljs-comment">// The processor name must be unique.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">'system-x-processor'</span>;
  }

  <span class="hljs-keyword">async</span> readLocation(
    location: LocationSpec,
    _optional: <span class="hljs-built_in">boolean</span>,
    emit: CatalogProcessorEmit,
    _parser: CatalogProcessorParser,
    cache: CatalogProcessorCache,
  ): <span class="hljs-built_in">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
    <span class="hljs-comment">// Pick a custom location type string. A location will be</span>
    <span class="hljs-comment">// registered later with this type.</span>
    <span class="hljs-keyword">if</span> (location.type !== <span class="hljs-string">'system-x'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">const</span> cacheItem = <span class="hljs-keyword">await</span> cache.get&lt;CacheItem&gt;(CACHE_KEY);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// This assumes an URL reader that returns the response together with the ETag.</span>
      <span class="hljs-comment">// We send the ETag from the previous run if it exists.</span>
      <span class="hljs-comment">// The previous ETag will be set in the headers for the outgoing request and system-x</span>
      <span class="hljs-comment">// is going to throw NOT_MODIFIED (HTTP 304) if the ETag matches.</span>
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.reader.readUrl?.(location.target, {
        etag: cacheItem?.etag,
      });
      <span class="hljs-keyword">if</span> (!response) {
        <span class="hljs-comment">// readUrl is currently optional to implement so we have to check if we get a response back.</span>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(
          <span class="hljs-string">'No URL reader that can parse system-x targets installed'</span>,
        );
      }

      <span class="hljs-comment">// ETag is optional in the response but we need it to cache the result.</span>
      <span class="hljs-keyword">if</span> (!response.etag) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(
          <span class="hljs-string">'No ETag returned from system-x, cannot use response for caching'</span>,
        );
      }

      <span class="hljs-comment">// For this example the JSON payload is a single entity.</span>
      <span class="hljs-keyword">const</span> entity: Entity = <span class="hljs-built_in">JSON</span>.parse(response.buffer.toString());
      emit(results.entity(location, entity));

      <span class="hljs-comment">// Update the cache with the new ETag and entity used for the next run.</span>
      <span class="hljs-keyword">await</span> cache.set&lt;CacheItem&gt;(CACHE_KEY, {
        etag: response.etag,
        entity,
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">if</span> (error.name === <span class="hljs-string">'NotModifiedError'</span> &amp;&amp; cacheItem) {
        <span class="hljs-comment">// The ETag matches and we have a cached value from the previous run.</span>
        emit(results.entity(location, cacheItem.entity));
      }
      <span class="hljs-keyword">const</span> message = <span class="hljs-string">`Unable to read <span class="hljs-subst">${location.<span class="hljs-keyword">type</span>}</span>, <span class="hljs-subst">${error}</span>`</span>;
      emit(results.generalError(location, message));
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}
</code></pre>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2/22/2022</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/features/software-catalog/extending-the-model"><span class="arrow-prev">← </span><span>Extending the model</span></a><a class="docs-next button" href="/docs/features/software-catalog/catalog-customization"><span>Catalog Customization</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#background">Background</a></li><li><a href="#custom-entity-providers">Custom Entity Providers</a><ul class="toc-headings"><li><a href="#creating-an-entity-provider">Creating an Entity Provider</a></li><li><a href="#provider-mutations">Provider Mutations</a></li><li><a href="#installing-the-provider">Installing the Provider</a></li></ul></li><li><a href="#custom-processors">Custom Processors</a><ul class="toc-headings"><li><a href="#processors-and-the-ingestion-loop">Processors and the Ingestion Loop</a></li><li><a href="#deciding-on-the-new-locations">Deciding on the New Locations</a></li><li><a href="#creating-a-catalog-data-reader-processor">Creating a Catalog Data Reader Processor</a></li><li><a href="#caching-processing-results">Caching processing results</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div class="footer-title"><a href="/"><h2 class="footerLogo"></h2></a></div><div><h5>Docs</h5><a href="/docs/overview/what-is-backstage">What is Backstage?</a><a href="/docs/getting-started/">Getting started</a><a href="/docs/features/software-catalog/software-catalog-overview">Software Catalog</a><a href="/docs/plugins/create-a-plugin">Create a Plugin</a><a href="/docs/dls/design">Designing for Backstage</a></div><div><h5>Community</h5><a href="https://discord.gg/MUpMjP2">Support chatroom</a><a href="https://github.com/backstage/backstage/blob/master/CONTRIBUTING.md">Contributing</a><a href="https://backstage.spotify.com">Adopting</a><a href="https://github.com/backstage/community">Community Sessions</a><a href="https://mailchi.mp/spotify/backstage-community">Subscribe to our newsletter</a><a href="https://www.cncf.io/sandbox-projects/">CNCF Sandbox</a></div><div><h5>More</h5><a href="https://spotify.github.io/">Open Source @ Spotify</a><a href="https://engineering.atspotify.com/">Spotify Engineering Blog</a><a href="https://developer.spotify.com/">Spotify for Developers</a><a href="https://github.com/backstage/backstage">GitHub</a><a class="github-button" href="https://github.com/backstage/backstage" data-icon="octicon-star" data-count-href="/backstage/backstage/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><div class="social"><a href="https://twitter.com/SpotifyEng" class="twitter-follow-button">Follow @SpotifyEng</a></div></div></section><p style="text-align:center"><a href="https://spotify.github.io">Made with ❤️ at Spotify</a></p><p class="copyright">Copyright © 2022 Backstage Project Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: https://www.linuxfoundation.org/trademark-usage</p></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '8d115c9875ba0f4feaee95bab55a1645',
                indexName: 'backstage',
                inputSelector: '#search_input_react'
              });
            </script></body></html>