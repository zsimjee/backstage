<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Search &quot;HOW TO&quot; guides · Backstage Software Catalog and Developer Platform</title><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="generator" content="Docusaurus"/><meta name="description" content="Search &quot;HOW TO&quot; guides"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Search &quot;HOW TO&quot; guides · Backstage Software Catalog and Developer Platform"/><meta property="og:type" content="website"/><meta property="og:url" content="https://backstage.io/"/><meta property="og:description" content="Search &quot;HOW TO&quot; guides"/><meta property="og:image" content="https://backstage.io/img/sharing-opengraph.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://backstage.io/img/twitter-summary.png"/><link rel="shortcut icon" href="/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/monokai.min.css"/><link rel="alternate" type="application/atom+xml" href="https://backstage.io/blog/atom.xml" title="Backstage Software Catalog and Developer Platform Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://backstage.io/blog/feed.xml" title="Backstage Software Catalog and Developer Platform Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-163836834-5', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono:500,700&amp;display=swap"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://unpkg.com/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script type="text/javascript" src="/js/medium-zoom.js"></script><script type="text/javascript" src="/js/dismissable-banner.js"></script><script type="text/javascript" src="/js/scroll-nav-to-view-in-docs.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">Backstage Software Catalog and Developer Platform</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://github.com/backstage/backstage" target="_self">GitHub</a></li><li class="siteNavGroupActive"><a href="/docs/overview/what-is-backstage" target="_self">Docs</a></li><li class=""><a href="/plugins" target="_self">Plugins</a></li><li class=""><a href="/blog" target="_self">Blog</a></li><li class=""><a href="/docs/releases/v1.3.0" target="_self">Releases</a></li><li class=""><a href="/demos" target="_self">Demos</a></li><li class=""><a href="/community" target="_self">Community</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Backstage Search</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Overview<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/overview/what-is-backstage">What is Backstage?</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/architecture-overview">Architecture overview</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/roadmap">Roadmap</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/vision">Vision</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/background">The Spotify Story</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/adopting">Strategies for adopting</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/versioning-policy">Release &amp; Versioning Policy</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/support">Support and community</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/glossary">Backstage Glossary</a></li><li class="navListItem"><a class="navItem" href="/docs/overview/logos">Logo assets</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Getting Started<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/getting-started/">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/configuration">Getting Started, configuring Backstage</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/create-an-app">Create an App</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/running-backstage-locally">Running Backstage Locally</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">App configuration</h4><ul><li class="navListItem"><a class="navItem" href="/docs/getting-started/configure-app-with-plugins">Configuring App with plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/app-custom-theme">Customize the look-and-feel of your App</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/homepage">Backstage homepage - Setup and Customization</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/getting-started/keeping-backstage-updated">Keeping Backstage Updated</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/concepts">Key Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/contributors">Contributors</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started/project-structure">Backstage Project Structure</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Local Development<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">CLI</h4><ul><li class="navListItem"><a class="navItem" href="/docs/local-dev/cli-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/local-dev/cli-build-system">Build System</a></li><li class="navListItem"><a class="navItem" href="/docs/local-dev/cli-commands">Commands</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/local-dev/linking-local-packages">Linking in Local Packages</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Core Features<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Software Catalog</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/software-catalog-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/life-of-an-entity">The Life of an Entity</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/configuration">Catalog Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/system-model">System Model</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/descriptor-format">YAML File Format</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/references">Entity References</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/well-known-annotations">Well-known Annotations</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/well-known-relations">Well-known Relations</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/well-known-statuses">Well-known Statuses</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/extending-the-model">Extending the model</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/external-integrations">External integrations</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/catalog-customization">Catalog Customization</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-catalog/software-catalog-api">API</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Kubernetes</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/kubernetes/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/kubernetes/installation">Installation</a></li><li class="navListItem"><a class="navItem" href="/docs/features/kubernetes/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/features/kubernetes/troubleshooting">Troubleshooting</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Software Templates</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/software-templates-index">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/configuration">Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/adding-templates">Adding your own Templates</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/writing-templates">Writing Templates</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/builtin-actions">Builtin actions</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/writing-custom-actions">Writing Custom Actions</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/writing-custom-field-extensions">Writing Custom Field Extensions</a></li><li class="navListItem"><a class="navItem" href="/docs/features/software-templates/migrating-from-v1beta2-to-v1beta3">Migrating to v1beta3 templates</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Backstage Search</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/search/search-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/getting-started">Getting Started with Search</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/concepts">Search Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/architecture">Search Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/features/search/search-engines">Search Engines</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/features/search/how-to-guides">&quot;HOW TO&quot; guides</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">TechDocs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/techdocs-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/concepts">Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/addons">TechDocs Addons</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/architecture">TechDocs Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/creating-and-publishing">Creating and Publishing Documentation</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/configuration">TechDocs Configuration Options</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/using-cloud-storage">Using Cloud Storage for TechDocs generated files</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/configuring-ci-cd">Configuring CI/CD to generate and publish TechDocs sites</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/cli">TechDocs CLI</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/how-to-guides">&quot;HOW TO&quot; guides</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/troubleshooting">Troubleshooting</a></li><li class="navListItem"><a class="navItem" href="/docs/features/techdocs/faqs">FAQ</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Integrations<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/integrations/">Overview</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">AWS S3</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/aws-s3/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/aws-s3/discovery">Discovery</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Azure</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/azure/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/azure/discovery">Discovery</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/azure/org">Org Data</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Bitbucket</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/bitbucket/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/bitbucket/discovery">Discovery</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Bitbucket Cloud</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/bitbucketCloud/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/bitbucketCloud/discovery">Discovery</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Datadog</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/datadog-rum/installation">Installation</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Gerrit</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/gerrit/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/gerrit/discovery">Discovery</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">GitHub</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/github/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/github/discovery">Discovery</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/github/org">Org Data</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/github/github-apps">GitHub Apps</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">GitLab</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/gitlab/locations">Locations</a></li><li class="navListItem"><a class="navItem" href="/docs/integrations/gitlab/discovery">Discovery</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Google GCS</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/google-cloud-storage/locations">Locations</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">LDAP</h4><ul><li class="navListItem"><a class="navItem" href="/docs/integrations/ldap/org">Org Data</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Plugins<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/plugins/">Intro to plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/existing-plugins">Existing plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/create-a-plugin">Create a Backstage Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/plugin-development">Plugin Development</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/structure-of-a-plugin">Structure of a Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/integrating-plugin-into-software-catalog">Integrate into the Software Catalog</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/integrating-search-into-plugins">Integrating Search into a plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/composability">Composability System</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/analytics">Plugin Analytics</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Backends and APIs</h4><ul><li class="navListItem"><a class="navItem" href="/docs/plugins/proxying">Proxying</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/backend-plugin">Backend plugins</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/call-existing-api">Call Existing API</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/url-reader">URL Reader</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Testing</h4><ul><li class="navListItem"><a class="navItem" href="/docs/plugins/testing">Testing with Jest</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Publishing</h4><ul><li class="navListItem"><a class="navItem" href="/docs/plugins/publish-private">Publish private</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/add-to-marketplace">Add to Marketplace</a></li><li class="navListItem"><a class="navItem" href="/docs/plugins/observability">Observability</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Configuration<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/conf/">Static Configuration in Backstage</a></li><li class="navListItem"><a class="navItem" href="/docs/conf/reading">Reading Backstage Configuration</a></li><li class="navListItem"><a class="navItem" href="/docs/conf/writing">Writing Backstage Configuration Files</a></li><li class="navListItem"><a class="navItem" href="/docs/conf/defining">Defining Configuration for your Plugin</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Auth and identity<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/auth/">Authentication in Backstage</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Included providers</h4><ul><li class="navListItem"><a class="navItem" href="/docs/auth/auth0/provider">Auth0</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/atlassian/provider">Atlassian</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/bitbucket/provider">Bitbucket</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/microsoft/provider">Azure</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/github/provider">GitHub</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/gitlab/provider">GitLab</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/google/provider">Google</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/google/gcp-iap-auth">Google IAP</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/okta/provider">Okta</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/onelogin/provider">OneLogin</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/oauth2-proxy/provider">OAuth 2 Custom Proxy</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/auth/identity-resolver">Sign-in Identities and Resolvers</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/auth-backend">Auth backend</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/oauth">OAuth and OpenID Connect</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/add-auth-provider">Contributing New Providers</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/troubleshooting">Troubleshooting Auth</a></li><li class="navListItem"><a class="navItem" href="/docs/auth/glossary">Glossary</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Permissions<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/permissions/overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/permissions/concepts">Concepts</a></li><li class="navListItem"><a class="navItem" href="/docs/permissions/getting-started">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/docs/permissions/writing-a-policy">Writing a permission policy</a></li><li class="navListItem"><a class="navItem" href="/docs/permissions/custom-rules">Defining custom permission rules</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Tutorial: using Permissions in your plugin</h4><ul><li class="navListItem"><a class="navItem" href="/docs/permissions/plugin-authors/01-setup">1. Tutorial setup</a></li><li class="navListItem"><a class="navItem" href="/docs/permissions/plugin-authors/02-adding-a-basic-permission-check">2. Adding a basic permission check</a></li><li class="navListItem"><a class="navItem" href="/docs/permissions/plugin-authors/03-adding-a-resource-permission-check">3. Adding a resource permission check</a></li><li class="navListItem"><a class="navItem" href="/docs/permissions/plugin-authors/04-authorizing-access-to-paginated-data">4. Authorizing access to paginated data</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Deployment<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/deployment/">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/deployment/docker">Docker</a></li><li class="navListItem"><a class="navItem" href="/docs/deployment/k8s">Kubernetes</a></li><li class="navListItem"><a class="navItem" href="/docs/deployment/heroku">Heroku</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Designing for Backstage<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/dls/design">Design</a></li><li class="navListItem"><a class="navItem" href="/docs/dls/contributing-to-storybook">Contributing to Storybook</a></li><li class="navListItem"><a class="navItem" href="/docs/dls/figma">Figma</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">API Reference<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/api/utility-apis">Utility APIs</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API Reference</h4><ul><li class="navListItem"><a class="navItem" href="/docs/reference/">Package Index</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/api/deprecations">Deprecations</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Tutorials<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/tutorials/journey">Future developer journey</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/quickstart-app-plugin">Adding Custom Plugin to Existing Monorepo App</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/package-role-migration">Package Role Migration</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/migrating-away-from-core">Migrating away from @backstage/core</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/configuring-plugin-databases">Configuring Plugin Databases</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/switching-sqlite-postgres">Switching Backstage from SQLite to PostgreSQL</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/using-backstage-proxy-within-plugin">Using the Backstage Proxy from Within a Plugin</a></li><li class="navListItem"><a class="navItem" href="/docs/tutorials/backend-to-backend-auth">Backend-to-Backend Authentication</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Architecture Decision Records (ADRs)<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-overview">Overview</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr001">&#x27;ADR001: Architecture Decision Record (ADR) log&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr002">&#x27;ADR002: Default Software Catalog File Format&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr003">&#x27;ADR003: Avoid Default Exports and Prefer Named Exports&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr004">&#x27;ADR004: Module Export Structure&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr005">&#x27;ADR005: Catalog Core Entities&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr006">&#x27;ADR006: Avoid React.FC and React.SFC&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr007">&#x27;ADR007: Use MSW to mock http requests&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr008">&#x27;ADR008: Default Catalog File Name&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr009">&#x27;ADR009: Entity References&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr010">&#x27;ADR010: Use the Luxon Date Library&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr011">&#x27;ADR011: Plugin Package Structure&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr012">&#x27;ADR012: Use Luxon.toLocaleString and date/time presets&#x27;</a></li><li class="navListItem"><a class="navItem" href="/docs/architecture-decisions/adrs-adr013">&#x27;ADR013: Proper use of HTTP fetching libraries&#x27;</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">FAQ<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><li class="navListItem"><a class="navItem" href="/docs/FAQ">FAQ</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/backstage/backstage/edit/master/docs/features/search/how-to-guides.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Search &quot;HOW TO&quot; guides</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="how-to-implement-your-own-search-api"></a><a href="#how-to-implement-your-own-search-api" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to implement your own Search API</h2>
<p>The Search plugin provides implementation of one primary API by default: the
<a href="https://github.com/backstage/backstage/blob/db2666b980853c281b8fe77905d7639c5d255f13/plugins/search/src/apis.ts#L35">SearchApi</a>,
which is responsible for talking to the search-backend to query search results.</p>
<p>There may be occasions where you need to implement this API yourself, to
customize it to your own needs - for example if you have your own search backend
that you want to talk to. The purpose of this guide is to walk you through how
to do that in two steps.</p>
<ol>
<li>Implement the <code>SearchApi</code>
<a href="https://github.com/backstage/backstage/blob/db2666b980853c281b8fe77905d7639c5d255f13/plugins/search/src/apis.ts#L31">interface</a>
according to your needs.</li>
</ol>
<pre><code class="hljs css language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> SearchClient <span class="hljs-keyword">implements</span> SearchApi {
  <span class="hljs-comment">// your implementation</span>
}
</code></pre>
<ol start="2">
<li>Override the API ref <code>searchApiRef</code> with your new implemented API in the
<code>App.tsx</code> using <code>ApiFactories</code>.
<a href="https://backstage.io/docs/api/utility-apis#app-apis">Read more about App APIs</a>.</li>
</ol>
<pre><code class="hljs css language-typescript"><span class="hljs-keyword">const</span> app = createApp({
  apis: [
    <span class="hljs-comment">// SearchApi</span>
    createApiFactory({
      api: searchApiRef,
      deps: { discovery: discoveryApiRef },
      factory({ discovery }) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SearchClient({ discoveryApi: discovery });
      },
    }),
  ],
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="how-to-index-techdocs-documents"></a><a href="#how-to-index-techdocs-documents" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to index TechDocs documents</h2>
<p>The TechDocs plugin has supported integrations to Search, meaning that it
provides a default collator factory ready to be used.</p>
<p>The purpose of this guide is to walk you through how to register the
<a href="https://github.com/backstage/backstage/blob/master/plugins/techdocs-backend/src/search/DefaultTechDocsCollatorFactory.ts">DefaultTechDocsCollatorFactory</a>
in your App, so that you can get TechDocs documents indexed.</p>
<p>If you have been through the
<a href="https://backstage.io/docs/features/search/getting-started">Getting Started with Search guide</a>,
you should have the <code>packages/backend/src/plugins/search.ts</code> file available. If
so, you can go ahead and follow this guide - if not, start by going through the
getting started guide.</p>
<ol>
<li>Import the <code>DefaultTechDocsCollatorFactory</code> from
<code>@backstage/plugin-techdocs-backend</code>.</li>
</ol>
<pre><code class="hljs css language-typescript"><span class="hljs-keyword">import</span> { DefaultTechDocsCollatorFactory } <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/plugin-techdocs-backend'</span>;
</code></pre>
<ol start="2">
<li>If there isn't an existing schedule you'd like to run the collator on, be
sure to create it first. Something like...</li>
</ol>
<pre><code class="hljs css language-typescript"><span class="hljs-keyword">import</span> { Duration } <span class="hljs-keyword">from</span> <span class="hljs-string">'luxon'</span>;

<span class="hljs-keyword">const</span> every10MinutesSchedule = env.scheduler.createScheduledTaskRunner({
  frequency: Duration.fromObject({ seconds: <span class="hljs-number">600</span> }),
  timeout: Duration.fromObject({ seconds: <span class="hljs-number">900</span> }),
  initialDelay: Duration.fromObject({ seconds: <span class="hljs-number">3</span> }),
});
</code></pre>
<ol start="3">
<li>Register the <code>DefaultTechDocsCollatorFactory</code> with the IndexBuilder.</li>
</ol>
<pre><code class="hljs css language-typescript">indexBuilder.addCollator({
  schedule: every10MinutesSchedule,
  factory: DefaultTechDocsCollatorFactory.fromConfig(env.config, {
    discovery: env.discovery,
    logger: env.logger,
    tokenManager: env.tokenManager,
  }),
});
</code></pre>
<p>You should now have your TechDocs documents indexed to your search engine of
choice!</p>
<p>If you want your users to be able to filter down to the techdocs type when
searching, you can update your <code>SearchPage.tsx</code> file in
<code>packages/app/src/components/search</code> by adding <code>techdocs</code> to the list of values
of the <code>SearchType</code> component.</p>
<pre><code class="hljs css language-tsx"><span class="hljs-tag">&lt;<span class="hljs-name">Paper</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{classes.filters}</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">SearchType</span>
    <span class="hljs-attr">values</span>=<span class="hljs-string">{[</span>'<span class="hljs-attr">techdocs</span>', '<span class="hljs-attr">software-catalog</span>']}
    <span class="hljs-attr">name</span>=<span class="hljs-string">"type"</span>
    <span class="hljs-attr">defaultValue</span>=<span class="hljs-string">"software-catalog"</span>
  /&gt;</span>
  ...
<span class="hljs-tag">&lt;/<span class="hljs-name">Paper</span>&gt;</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="how-to-limit-what-can-be-searched-in-the-software-catalog"></a><a href="#how-to-limit-what-can-be-searched-in-the-software-catalog" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to limit what can be searched in the Software Catalog</h2>
<p>The Software Catalog includes a wealth of information about the components,
systems, groups, users, and other aspects of your software ecosystem. However,
you may not always want <em>every</em> aspect to appear when a user searches the
catalog. Examples include:</p>
<ul>
<li>Entities of kind <code>Location</code>, which are often not useful to Backstage users.</li>
<li>Entities of kind <code>User</code> or <code>Group</code>, if you'd prefer that users and groups be
exposed to search in a different way (or not at all).</li>
</ul>
<p>It's possible to write your own <a href="/docs/features/search/concepts#collators">Collator</a> to control
exactly what's available to search, (or a <a href="/docs/features/search/concepts#decorators">Decorator</a>
to filter things out here and there), but the <code>DefaultCatalogCollator</code> that's
provided by <code>@backstage/plugin-catalog-backend</code> offers some configuration too!</p>
<pre><code class="hljs css language-diff">// packages/backend/src/plugins/search.ts

indexBuilder.addCollator({
  defaultRefreshIntervalSeconds: 600,
  collator: DefaultCatalogCollator.fromConfig(env.config, {
    discovery: env.discovery,
    tokenManager: env.tokenManager,
<span class="hljs-addition">+   filter: {</span>
<span class="hljs-addition">+      kind: ['API', 'Component', 'Domain', 'Group', 'System', 'User'],</span>
<span class="hljs-addition">+   },</span>
  }),
});
</code></pre>
<p>As shown above, you can add a catalog entity filter to narrow down what catalog
entities are indexed by the search engine.</p>
<h2><a class="anchor" aria-hidden="true" id="how-to-migrate-from-search-alpha-to-beta"></a><a href="#how-to-migrate-from-search-alpha-to-beta" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to migrate from Search Alpha to Beta</h2>
<p>For the purposes of this guide, Search Beta version is defined as:</p>
<ul>
<li><strong>Search Plugin</strong>: At least <code>v0.7.2</code></li>
<li><strong>Search Backend Plugin</strong>: At least <code>v0.4.6</code></li>
<li><strong>Search Backend Node</strong>: At least <code>v0.5.0</code></li>
<li><strong>Search Common</strong>: At least <code>v0.3.0</code></li>
</ul>
<p>In the Beta version, the Search Platform's indexing process has been rewritten
as a stream pipeline in order to improve efficiency and performance on large
sets of documents.</p>
<p>If you've not yet extended the Search Platform with custom code, and have
instead taken advantage of default collators, decorators, and search engines
provided by existing plugins, the migration process is fairly straightforward:</p>
<ol>
<li><p>Upgrade to at least version <code>0.5.0</code> of
<code>@backstage/plugin-search-backend-node</code>, as well as any backend plugins whose
collators you are using (e.g. at least version <code>0.23.0</code> of
<code>@backstage/plugin-catalog-backend</code> and/or version <code>0.14.1</code> of
<code>@backstage/plugin-techdocs-backend</code>), as well as any search-engine specific
plugin you are using (e.g. at least version <code>0.3.0</code> of
<code>@backstage/plugin-search-backend-module-pg</code> or version <code>0.1.0</code> of
<code>@backstage/plugin-search-backend-module-elasticsearch</code>).</p></li>
<li><p>Then, make the following changes to your
<code>/packages/backend/src/plugins/search.ts</code> file:</p>
<pre><code class="hljs css language-diff"><span class="hljs-deletion">-import { DefaultCatalogCollator } from '@backstage/plugin-catalog-backend';</span>
<span class="hljs-deletion">-import { DefaultTechDocsCollator } from '@backstage/plugin-techdocs-backend';</span>
<span class="hljs-addition">+import { DefaultCatalogCollatorFactory } from '@backstage/plugin-catalog-backend';</span>
<span class="hljs-addition">+import { DefaultTechDocsCollatorFactory } from '@backstage/plugin-techdocs-backend';</span>
// ...
  const indexBuilder = new IndexBuilder({ logger: env.logger, searchEngine });
  indexBuilder.addCollator({
    defaultRefreshIntervalSeconds: 600,
<span class="hljs-deletion">-    collator: DefaultCatalogCollator.fromConfig(env.config, {</span>
       discovery: env.discovery,
     }),
<span class="hljs-addition">+    factory: DefaultCatalogCollatorFactory.fromConfig(env.config, {</span>
       discovery: env.discovery,
     }),
  });
  indexBuilder.addCollator({
    defaultRefreshIntervalSeconds: 600,
<span class="hljs-deletion">-     collator: DefaultTechDocsCollator.fromConfig(env.config, {</span>
<span class="hljs-addition">+     factory: DefaultTechDocsCollatorFactory.fromConfig(env.config, {</span>
        discovery: env.discovery,
        logger: env.logger,
    }),
  });
</code></pre></li>
</ol>
<p>Any custom collators, decorators, or search engine implementations will require
minor refactoring. Continue on for details.</p>
<h3><a class="anchor" aria-hidden="true" id="rewriting-alpha-style-collators-for-beta"></a><a href="#rewriting-alpha-style-collators-for-beta" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rewriting alpha-style collators for beta</h3>
<p>In alpha versions of the Backstage Search Platform, collators were classes that
implemented an <code>execute</code> method which resolved an <code>IndexableDocument</code> array.</p>
<p>In beta versions, the logic encapsulated by the aforementioned <code>execute</code> method
is contained within an <a href="https://nodejs.org/docs/latest-v14.x/api/stream.html#stream_object_mode">object-mode</a> <code>Readable</code> stream where each
object pushed onto the stream is of type <code>IndexableDocument</code>. Instances of this
stream are instantiated by a factory class conforming to the
<code>DocumentCollatorFactory</code> interface.</p>
<p>The optimal conversion strategy will vary depending on the collator's logic, but
the simplest conversion can follow a process like this:</p>
<ol>
<li>Rename your collator class to something like <code>YourCollatorFactory</code> and update
it to implement <code>DocumentCollatorFactory</code> instead of <code>DocumentCollator</code>.</li>
<li>Update its <code>execute</code> method so that it resolves
<code>AsyncGenerator&lt;YourIndexableDocument&gt;</code> instead of <code>YourIndexableDocument[]</code>.</li>
<li>Implement <code>DocumentCollatorFactory</code>'s <code>getCollator</code> method which resolves to
<code>Readable.from(this.execute())</code> (which is a utility for creating <a href="https://nodejs.org/docs/latest-v14.x/api/stream.html#stream_readable_streams">readable
streams</a> from <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for-await...of#iterating_over_async_generators">async generators</a>).</li>
</ol>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { DocumentCollatorFactory } <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/plugin-search-backend-node'</span>;
<span class="hljs-keyword">import</span> { Readable } <span class="hljs-keyword">from</span> <span class="hljs-string">'stream'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> YourCollatorFactory <span class="hljs-keyword">implements</span> DocumentCollatorFactory {
  <span class="hljs-keyword">public</span> readonly <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'your-type'</span>;
  <span class="hljs-keyword">async</span> *execute(): AsyncGenerator&lt;YourIndexableDocument&gt; {
    <span class="hljs-keyword">const</span> widgets = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.client.getWidgets();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> widget of widgets) {
      <span class="hljs-keyword">yield</span> {
        title: widget.name,
        location: widget.url,
        text: widget.description,
      };
    }
  }
  <span class="hljs-keyword">async</span> getCollator() {
    <span class="hljs-keyword">return</span> Readable.from(<span class="hljs-keyword">this</span>.execute());
  }
}
</code></pre>
<p>Note: it may be possible to simplify your collator dramatically! If your custom
collator was previously using streams under the hood (for example, by reading
newline delimited JSON from a local or remote file), you could just expose the
stream directly via a simple factory class:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { DocumentCollatorFactory } <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/plugin-search-backend-node'</span>;
<span class="hljs-keyword">import</span> { createReadStream } <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
<span class="hljs-keyword">import</span> { parse } <span class="hljs-keyword">from</span> <span class="hljs-string">'@jsonlines/core'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> YourCollatorFactory <span class="hljs-keyword">implements</span> DocumentCollatorFactory {
  <span class="hljs-keyword">public</span> readonly <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'your-type'</span>;
  <span class="hljs-keyword">async</span> getCollator() {
    <span class="hljs-keyword">const</span> parseStream = parse();
    <span class="hljs-keyword">return</span> createReadStream(<span class="hljs-string">'./documents.ndjson'</span>).pipe(parseStream);
  }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="rewriting-alpha-style-decorators-for-beta"></a><a href="#rewriting-alpha-style-decorators-for-beta" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rewriting alpha-style decorators for beta</h3>
<p>In alpha versions of the Backstage Search Platform, decorators were classes that
implemented an <code>execute</code> method which took an <code>IndexableDocument</code> array as an
argument, and resolved a modified array of the same type.</p>
<p>In beta versions, the logic encapsulated by the aforementioned <code>execute</code> method
is contained within an object-mode <code>Transform</code> stream which reads objects of
type <code>IndexableDocument</code>, and writes objects of a conforming type. Similar to
collators, instances of this stream are instantiated by a factory class
conforming to the <code>DocumentDecoratorFactory</code> interface.</p>
<p>Although you can choose to implement a <code>Transform</code> stream from scratch, the
<code>@backstage/plugin-search-backend-node</code> package provides a <code>DecoratorBase</code> class
in order to simplify the developer experience. With this base class, all that's
needed is to transfer your old decorator class logic into the base class' three
methods (<code>initialize</code>, <code>decorate</code>, and <code>finalize</code>), and implement the factory
class that instantiates the stream:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { DecoratorBase } <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/plugin-search-backend-node'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> YourDecorator <span class="hljs-keyword">extends</span> DecoratorBase {
  <span class="hljs-keyword">async</span> initialize() {
    <span class="hljs-comment">// Setup logic. Performed once before any documents are consumed.</span>
  }
  <span class="hljs-keyword">async</span> decorate(
    <span class="hljs-built_in">document</span>: YourIndexableDocument,
  ): <span class="hljs-built_in">Promise</span>&lt;YourIndexableDocument | YourIndexableDocument[] | <span class="hljs-literal">undefined</span>&gt; {
    <span class="hljs-comment">// Perform transformation logic here.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">document</span>;
  }
  <span class="hljs-keyword">async</span> finalize() {
    <span class="hljs-comment">// Teardown logic. Performed once after all documents have been consumed.</span>
  }
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> YourDecoratorFactory <span class="hljs-keyword">implements</span> DocumentDecoratorFactory {
  <span class="hljs-keyword">async</span> getDecorator() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> YourDecorator();
  }
}
</code></pre>
<p>Note the return type of the <code>decorate</code> method and how each can be used to
different effect.</p>
<ul>
<li><p>By resolving a single <code>YourIndexableDocument</code> object, your decorator can be
used to make simple transformations:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">class</span> BooleanWidgetCoolnessDecorator <span class="hljs-keyword">extends</span> DecoratorBase {
  <span class="hljs-keyword">async</span> decorator(widget) {
    <span class="hljs-comment">// Perform a simple, 1:1 transformation.</span>
    widget.isCool = widget.isCool === <span class="hljs-string">'true'</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> widget;
  }
}
</code></pre></li>
<li><p>By resolving <code>undefined</code>, your decorator can filter out documents which
shouldn't be in the index:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">class</span> OnlyCoolWidgetsDecorator <span class="hljs-keyword">extends</span> DecoratorBase {
  <span class="hljs-keyword">async</span> decorator(widget) {
    <span class="hljs-comment">// Perform a simple filter operation.</span>
    <span class="hljs-keyword">return</span> widget.isCool ? widget : <span class="hljs-literal">undefined</span>;
  }
}
</code></pre></li>
<li><p>By resolving an array of <code>YourIndexableDocument</code> objects, you can generate
multiple documents based on the content of one:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">class</span> WidgetByVariantDecorator <span class="hljs-keyword">extends</span> DecoratorBase {
  <span class="hljs-keyword">async</span> decorator(widget) {
    <span class="hljs-comment">// Generate one widget doc per widget variant.</span>
    <span class="hljs-keyword">return</span> widget.variants.map(<span class="hljs-function"><span class="hljs-params">variant</span> =&gt;</span> {
      <span class="hljs-comment">// Each widget doc is the given widget plus a "variant" property</span>
      <span class="hljs-comment">// pulled from a widget.variants string array.</span>
      <span class="hljs-keyword">return</span> {
        ...widget,
        variant,
      };
    });
  }
}
</code></pre></li>
</ul>
<p>In alpha versions, a decorator had access to every <code>IndexableDocument</code>
simultaneously. This is no longer possible in beta versions (precisely to make
the indexing process more efficient and performant). You will need to modify
your decorator's logic so that it does not need access to every document at
once.</p>
<h3><a class="anchor" aria-hidden="true" id="rewriting-alpha-style-search-engines-for-beta"></a><a href="#rewriting-alpha-style-search-engines-for-beta" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Rewriting alpha-style search engines for beta</h3>
<p>Search Engines are responsible for both querying and indexing documents to an
underlying search engine technology. While the search engine query interface
didn't change between alpha and beta versions, the indexing half of the
interface <em>did</em> change.</p>
<p>In alpha versions of the Backstage Search Platform, a search engine implemented
an <code>index</code> method which took a <code>type</code> and an <code>IndexableDocument</code> array and was
responsible for writing these documents to the underlying search engine.</p>
<p>In beta versions, the logic encapsulated by the aforementioned <code>index</code> method is
contained within an object-mode <code>Writable</code> stream which expects objects of type
<code>IndexableDocument</code>. On the search engine class itself, the <code>index</code> method is
replaced with a <code>getIndexer</code> factory method which still takes the <code>type</code>, but
resolves an instance of the aforementioned <code>Writable</code> stream.</p>
<p>Although you can choose to implement a <code>Writable</code> stream from scratch, the
<code>@backstage/plugin-search-backend-node</code> package provides a
<code>BatchSearchEngineIndexer</code> class in order to simplify the developer experience.
With this base class, which collects documents in batches of a configurable size
on your behalf, all that's needed is to transfer your old <code>index</code> method logic
into the base class' three methods (<code>initialize</code>, <code>index</code>, and <code>finalize</code>), and
implement the factory method that instantiates the stream:</p>
<pre><code class="hljs css language-ts"><span class="hljs-keyword">import</span> { BatchSearchEngineIndexer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/plugin-search-backend-node'</span>;
<span class="hljs-keyword">import</span> { SearchEngine } <span class="hljs-keyword">from</span> <span class="hljs-string">'@backstage/plugin-search-common'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> YourSearchEngineIndexer <span class="hljs-keyword">extends</span> BatchSearchEngineIndexer {
  <span class="hljs-keyword">constructor</span>(<span class="hljs-params">{ <span class="hljs-keyword">type</span> }: { <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span> }</span>) {
    <span class="hljs-comment">// Customize the number of documents passed to the index method per batch.</span>
    <span class="hljs-keyword">super</span>({ batchSize: <span class="hljs-number">500</span> });
    <span class="hljs-comment">// An imaginary search engine indexing client.</span>
    <span class="hljs-keyword">this</span>.index = <span class="hljs-keyword">new</span> SomeSearchEngineIndex({ indexName: <span class="hljs-keyword">type</span> });
  }
  <span class="hljs-keyword">async</span> initialize() {
    <span class="hljs-comment">// Setup logic. Performed once before any documents are consumed.</span>
  }
  <span class="hljs-keyword">async</span> index(documents: IndexableDocument[]) {
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.index.batchOf(documents);
  }
  <span class="hljs-keyword">async</span> finalize() {
    <span class="hljs-comment">// Teardown logic. Performed once after all documents have been consumed.</span>
  }
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> YourSearchEngine <span class="hljs-keyword">implements</span> SearchEngine {
  <span class="hljs-keyword">async</span> getIndexer(<span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> YourSearchEngineIndexer({ <span class="hljs-keyword">type</span> });
  }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="how-to-customize-search-results-highlighting-styling"></a><a href="#how-to-customize-search-results-highlighting-styling" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>How to customize search results highlighting styling</h2>
<p>The default highlighting styling for matched terms in search results is your
browsers default styles for the <code>&lt;mark&gt;</code> HTML tag. If you want to customize
how highlighted terms look you can follow Backstage's guide on how to
<a href="https://backstage.io/docs/getting-started/app-custom-theme">Customize the look-and-feel of your App</a>
to create an override with your preferred styling.</p>
<p>For example, the following will result in highlighted terms to be bold &amp; underlined:</p>
<pre><code class="hljs css language-jsx"><span class="hljs-keyword">const</span> highlightOverride = {
  <span class="hljs-attr">BackstageHighlightedSearchResultText</span>: {
    <span class="hljs-attr">highlight</span>: {
      <span class="hljs-attr">color</span>: <span class="hljs-string">'inherit'</span>,
      <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'inherit'</span>,
      <span class="hljs-attr">fontWeight</span>: <span class="hljs-string">'bold'</span>,
      <span class="hljs-attr">textDecoration</span>: <span class="hljs-string">'underline'</span>,
    },
  },
};
</code></pre>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 6/15/2022</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/features/search/search-engines"><span class="arrow-prev">← </span><span>Search Engines</span></a><a class="docs-next button" href="/docs/features/techdocs/techdocs-overview"><span>Overview</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#how-to-implement-your-own-search-api">How to implement your own Search API</a></li><li><a href="#how-to-index-techdocs-documents">How to index TechDocs documents</a></li><li><a href="#how-to-limit-what-can-be-searched-in-the-software-catalog">How to limit what can be searched in the Software Catalog</a></li><li><a href="#how-to-migrate-from-search-alpha-to-beta">How to migrate from Search Alpha to Beta</a><ul class="toc-headings"><li><a href="#rewriting-alpha-style-collators-for-beta">Rewriting alpha-style collators for beta</a></li><li><a href="#rewriting-alpha-style-decorators-for-beta">Rewriting alpha-style decorators for beta</a></li><li><a href="#rewriting-alpha-style-search-engines-for-beta">Rewriting alpha-style search engines for beta</a></li></ul></li><li><a href="#how-to-customize-search-results-highlighting-styling">How to customize search results highlighting styling</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div class="footer-title"><a href="/"><h2 class="footerLogo"></h2></a></div><div><h5>Docs</h5><a href="/docs/overview/what-is-backstage">What is Backstage?</a><a href="/docs/getting-started/">Getting started</a><a href="/docs/features/software-catalog/software-catalog-overview">Software Catalog</a><a href="/docs/plugins/create-a-plugin">Create a Plugin</a><a href="/docs/dls/design">Designing for Backstage</a></div><div><h5>Community</h5><a href="https://discord.gg/MUpMjP2">Support chatroom</a><a href="https://github.com/backstage/backstage/blob/master/CONTRIBUTING.md">Contributing</a><a href="https://backstage.spotify.com">Adopting</a><a href="https://github.com/backstage/community">Community Sessions</a><a href="https://mailchi.mp/spotify/backstage-community">Subscribe to our newsletter</a><a href="https://www.cncf.io/projects/">CNCF Incubation</a></div><div><h5>More</h5><a href="https://spotify.github.io/">Open Source @ Spotify</a><a href="https://engineering.atspotify.com/">Spotify Engineering Blog</a><a href="https://developer.spotify.com/">Spotify for Developers</a><a href="https://github.com/backstage/backstage">GitHub</a><a class="github-button" href="https://github.com/backstage/backstage" data-icon="octicon-star" data-count-href="/backstage/backstage/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a><div class="social"><a href="https://twitter.com/SpotifyEng" class="twitter-follow-button">Follow @SpotifyEng</a></div></div></section><p style="text-align:center"><a href="https://spotify.github.io">Made with ❤️ at Spotify</a></p><p class="copyright">Copyright © 2022 Backstage Project Authors. All rights reserved. The Linux Foundation has registered trademarks and uses trademarks. For a list of trademarks of The Linux Foundation, please see our Trademark Usage page: https://www.linuxfoundation.org/trademark-usage</p></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>window.twttr=(function(d,s, id){var js,fjs=d.getElementsByTagName(s)[0],t=window.twttr||{};if(d.getElementById(id))return t;js=d.createElement(s);js.id=id;js.src='https://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js, fjs);t._e = [];t.ready = function(f) {t._e.push(f);};return t;}(document, 'script', 'twitter-wjs'));</script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '8d115c9875ba0f4feaee95bab55a1645',
                indexName: 'backstage',
                inputSelector: '#search_input_react'
              });
            </script></body></html>